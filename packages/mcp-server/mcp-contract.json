{
  "schemaVersion": "1.0.0",
  "generatedAt": "2026-02-17T00:00:00.000Z",
  "tools": [
    {
      "name": "analyze_dissonance",
      "description": "Run Mirror Dissonance protocol to detect inconsistencies across requirements, configs, code, and runtime assumptions. Returns actionable findings with severity levels, evidence citations, and ADR references. Useful for validating proposed code changes against governance rules before implementation.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "files": {
            "type": "array",
            "items": { "type": "string" },
            "description": "List of file paths to analyze for dissonance (relative to repo root)"
          },
          "context": {
            "type": "string",
            "description": "Optional issue description or PR context to inform analysis"
          },
          "mode": {
            "type": "string",
            "enum": ["pull_request", "issue", "merge_group", "drift"],
            "default": "issue",
            "description": "Analysis mode: pull_request for PR checks, issue for planning, drift for baseline comparison"
          }
        },
        "required": ["files"]
      },
      "x-tier": "authoritative",
      "x-adr": "ADR-009",
      "x-visibilityHint": "Primary L1 governance analysis"
    },
    {
      "name": "validate_l0_invariants",
      "description": "Validate Phase Mirror's foundation-tier L0 invariants. These are non-negotiable governance checks that run in <100ns and enforce critical security and integrity constraints. Use this to validate code changes against foundational rules before implementation. Checks include: schema hash integrity, GitHub Actions permissions, drift magnitude, nonce freshness, and FPR contraction witness.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "checks": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "schema_hash",
                "permission_bits",
                "drift_magnitude",
                "nonce_freshness",
                "contraction_witness"
              ]
            },
            "description": "Specific invariants to check (optional, defaults to all applicable)"
          },
          "schemaFile": {
            "type": "string",
            "description": "Path to schema file for hash validation"
          },
          "expectedSchemaHash": {
            "type": "string",
            "description": "Expected SHA-256 hash of schema"
          },
          "workflowFiles": {
            "type": "array",
            "items": { "type": "string" },
            "description": "GitHub Actions workflow files to validate permissions"
          },
          "driftCheck": {
            "type": "object",
            "properties": {
              "currentMetric": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "value": { "type": "number" }
                },
                "required": ["name", "value"]
              },
              "baselineMetric": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "value": { "type": "number" }
                },
                "required": ["name", "value"]
              },
              "threshold": { "type": "number", "minimum": 0, "maximum": 1 }
            },
            "description": "Drift magnitude validation"
          },
          "nonceValidation": {
            "type": "object",
            "properties": {
              "nonce": { "type": "string" },
              "timestamp": { "type": "string", "format": "date-time" },
              "maxAgeSeconds": { "type": "number" }
            },
            "required": ["nonce", "timestamp"],
            "description": "Nonce freshness validation"
          },
          "contractionCheck": {
            "type": "object",
            "properties": {
              "previousFPR": { "type": "number", "minimum": 0, "maximum": 1 },
              "currentFPR": { "type": "number", "minimum": 0, "maximum": 1 },
              "witnessEventCount": { "type": "number", "minimum": 0 },
              "minRequiredEvents": { "type": "number", "minimum": 0 }
            },
            "required": ["previousFPR", "currentFPR", "witnessEventCount"],
            "description": "FPR contraction witness validation"
          }
        }
      },
      "x-tier": "authoritative",
      "x-adr": "ADR-009",
      "x-visibilityHint": "L0 foundation checks"
    },
    {
      "name": "check_adr_compliance",
      "description": "Validate code changes against Architecture Decision Records (ADRs). Checks if files comply with architectural constraints, coding standards, and governance policies documented in ADRs. Returns specific violations with remediation guidance. Use this before implementing changes to ensure adherence to architectural decisions.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "files": {
            "type": "array",
            "items": { "type": "string" },
            "minItems": 1,
            "description": "Files to check for ADR compliance",
            "examples": [
              [".github/workflows/deploy.yml"],
              ["src/fp-store/index.ts", "src/fp-store/schema.ts"]
            ]
          },
          "adrs": {
            "type": "array",
            "items": { "type": "string", "pattern": "^ADR-\\d{3}$" },
            "description": "Specific ADRs to check (optional)",
            "examples": [
              ["ADR-001"],
              ["ADR-001", "ADR-002", "ADR-003"]
            ]
          },
          "adrPath": {
            "type": "string",
            "description": "Path to ADR directory (default: ./docs/adr)"
          },
          "includeProposed": {
            "type": "boolean",
            "default": false,
            "description": "Include proposed ADRs"
          },
          "context": {
            "type": "string",
            "description": "Context about changes for better ADR matching"
          }
        },
        "required": ["files"]
      },
      "x-tier": "authoritative",
      "x-adr": "ADR-009",
      "x-visibilityHint": "ADR compliance validation"
    },
    {
      "name": "check_consent_requirements",
      "description": "Verify organization consent status for governance data access per ADR-004. This tool ensures compliance with GDPR and EU AI Act by checking granular resource-level consent before accessing sensitive governance data like FP patterns, metrics, cross-org benchmarks, and audit logs. Use this tool before calling other governance tools to ensure proper authorization.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "orgId": {
            "type": "string",
            "description": "Organization ID to check consent for"
          },
          "checkType": {
            "type": "string",
            "enum": [
              "validate",
              "summary",
              "required_for_operation"
            ],
            "description": "Type of consent check operation to perform"
          },
          "resources": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "fp_patterns",
                "fp_metrics",
                "cross_org_benchmarks",
                "rule_calibration",
                "audit_logs",
                "drift_baselines"
              ]
            },
            "description": "Array of resources to validate (required for 'validate' checkType)"
          },
          "tool": {
            "type": "string",
            "description": "Tool name for required_for_operation checkType"
          },
          "operation": {
            "type": "string",
            "description": "Tool operation for required_for_operation (e.g., 'fp_rate', 'cross_rule_comparison')"
          },
          "includePolicy": {
            "type": "boolean",
            "description": "Include full policy details in response"
          }
        },
        "required": ["orgId", "checkType"]
      },
      "x-tier": "authoritative",
      "x-adr": "ADR-009",
      "x-visibilityHint": "Consent requirement checks"
    },
    {
      "name": "query_fp_store",
      "description": "Query Phase Mirror's false positive (FP) store to analyze FP patterns, calculate FP rates, detect trends, and identify rules needing calibration. Requires organization consent for access (ADR-004 compliance). Use this to understand rule performance, learn from past false positives, and improve governance rule accuracy over time.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "queryType": {
            "type": "string",
            "enum": ["fp_rate", "recent_patterns", "trend_analysis", "cross_rule_comparison"],
            "description": "Type of query to perform"
          },
          "ruleId": {
            "type": "string",
            "description": "Rule ID (MD-###) for single-rule queries",
            "pattern": "^MD-\\d{3}$"
          },
          "ruleIds": {
            "type": "array",
            "items": { "type": "string", "pattern": "^MD-\\d{3}$" },
            "description": "Array of rule IDs for cross-rule comparison"
          },
          "orgId": {
            "type": "string",
            "description": "Organization ID (required for consent verification)"
          },
          "daysBack": {
            "type": "number",
            "minimum": 1,
            "maximum": 365,
            "description": "Days to look back (default: 30)"
          },
          "limit": {
            "type": "number",
            "minimum": 1,
            "maximum": 1000,
            "description": "Max results (default: 100)"
          },
          "threshold": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "FPR threshold for calibration (default: 0.1)"
          }
        },
        "required": ["queryType", "orgId"]
      },
      "x-tier": "experimental",
      "x-adr": null,
      "x-visibilityHint": "Advisory FP analytics only"
    },
    {
      "name": "dummy_experimental",
      "description": "Deliberately buggy experimental tool for governance-floor tests.",
      "inputSchema": {
        "type": "object",
        "properties": {}
      },
      "x-tier": "experimental",
      "x-adr": null,
      "x-visibilityHint": "Test tool for governance floor"
    }
  ]
}
